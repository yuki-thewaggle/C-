1. Unityでタイピングゲームを作ってみよう

皆さん、こんにちは。
今日は、Unityのワークショップに参加していただきありがとうございます。

僕は、バンタン高等学院の●●です。
今日は、Unityというものを使ってタイピングゲームを作っていきましょう。

それでは、Unityとは何なのかについて簡単にお話しします。

---
2. Unityとは

Unityは、簡単にハイパフォーマンスなゲームが作れるゲーム開発環境です。
ゲーム開発以外でも、3Dの技術やVRを使った色々なシステムを作ることができます。

詳しくは、Unityの公式サイトを見てみてください。

---
3. Unityがあれば

Unityがあれば、様々なゲーム機に対応したゲームが作れます。

スマホやPlayStation、WEBサイトなどの他にも、
たくさんの動作環境に対応しています。

---
4. Unityで作られたゲームの一例

Unityで作られた有名ゲームといえば、
スーパーマリオラン、ポケモンGO、
いっしょにチョキッとスニッパーズなどがあります。

特にモバイルゲーム向けとして利用度が高く、
モバイルゲーム向けの50%以上がUnityを使って開発されています。

---
5. Unityをダウンロードしよう

それでは、ゲーム作りの準備を始めたいと思います。

Unityは無料から使うことができます。
公式ダウンロードサイトからダウンロードして使いましょう。

今日は、既にダウンロードしてあるUnityを使いますので、
ダウンロード作業は必要ありません。

---
6. プランを選ぼう

自分でダウンロードして勉強してみたい場合は、
一番右の初心者向けをダウンロードするのがおすすめです。

このプランだと、無料でUnityを使うことができます。

---
7. 早速つくってみよう

では、作っていきましょう。

---
8. アセットとは

まず、ゲームを作るにあたって、
アセットというものをダウンロードします。

アセットとは、ゲームの部品のことです。

Unityにはアセットストアというものがあって、
たくさんの人が無料からアセットを提供しています。

今回は、このワークショップ専用に作ったアセットを使って
タイピングゲームを作っていきます。

---
9. 専用アセットをダウンロードする

今日は、既に専用アセットをダウンロードしてありますので、
ダウンロード作業は必要ありません。

自分のPCにダウンロードしたい場合は、
資料にあるURLにアクセスしてダウンロードしてください。

中央の右寄りにある「Download」というボタンをクリックすると、
PCのダウンロードフォルダに専用アセットがダウンロードされます。

---
10. unityを起動する

では、Unityを起動します。

画像のようなUnityマークのショートカットがデスクトップにあります。
これをダブルクリックして起動してください。

---
11. 新規プロジェクトを作成する

Unityを起動すると、画像のようなウィンドウが開かれます。
このウィンドウの中の情報を２ヵ所設定します。

まず１つ目は「Project name」です。

ゲームをひとつ開発するために、たくさんのデータが必要になります。
このまとまりをプロジェクトと呼びます。

つまり「Project name」とは、
あるゲームの開発に関する全データが入る箱の名前のことです。

今回はここに「TypingGame」と入力してください。

２つ目は、「Location」です。
これは、このプロジェクトのファイルを
PCのどこに保存するかを指定するものです。

今回は、デスクトップを指定して下さい。

その他の指定は、初期状態のままで大丈夫です。

「Project name」と「Location」の指定ができたら、
スタッフが確認しに行きますので声をかけて下さい。

（確認する）

確認が終わったら、「Create project」ボタンをクリックしてください。
すると、プロジェクトが作成されます。

---
12. Unityエディタのレイアウトを設定する

Unityは、たくさんのウィンドウを同時に開きながら作業をしていきます。
このウィンドウの配置のことをレイアウトと呼びます。

今回の説明資料では「Tall」というレイアウトを採用しています。
画像のような配置です。

---
13. レイアウト設定方法

説明資料と同じレイアウトにするためには、
上部にある「Window」タブをクリックして
「Layouts」にある「Tall」をクリックします。

---
14. アセットを選択する1

それでは、先ほど説明した専用アセットを使えるように設定していきます。
アセットを使うためには、インポートという作業を行います。

インポートの方法を説明します。

上部にある「Assets」をクリックして
「ImportPackage」にある「CustomPackage」をクリックします。

ファイルを選択するためのウィンドウが自動で開きましたか？

---
15. アセットを選択する2

次に、専用アセットを選択して「開く」ボタンをクリックしてください。

専用アセットがどこにあるかわからない場合は
スタッフに声をかけてください。

---
16. アセットをインポートする

次に、インポートするファイルを選択するウィンドウが出てきます。

デフォルトでは全部選択されている状態です。
今回はすべてのアセットを使いますので、
そのまま「Import」ボタンをクリックしてください。

（確認する）

---
17. インポートされたことを確認する

では、アセットがインポートできていることを確認します。

画像と同じように、「Project」ウィンドウの中に
ファイルが入っていればインポート成功です。

---
18. 新規シーンを作成する

まずは、新しいシーンを作成します。

現在の「Scene」ウィンドウに
空と地平線のようなものが映っていると思います。

このシーンには「SampleScene」という名前が付いていて、
すこし設定が加えられています。

今回は、まったく新しい初期状態のシーンから作っていきたいと思います。

新しいシーンを作成するために、
画面上部の「File」から「New Scene」をクリックしてください。

---
19. シーンとは

シーンとは、映画の１シーンと同じと考えて良いと思います。

舞台があって、その上にキャラクターや物があって、
それをライトが照らし、カメラが映し出します。

これら全てを
創ったり配置したりするのがシーンです。

そして、そのカメラで映し出された映像がゲームの１シーンとなります。

---
20. シーンを保存する

では、新規作成したシーンを保存します。

画面上部の「File」から「Save Scene」 をクリックしてください。

---
21. シーン名を入力する

「ファイル名」に「Main」と入力して
「保存」ボタンをクリックしてください。

---
22. シーンが作成されたことを確認する

「Hierarchy」ウィンドウに「Main」と表示されましたか？

表示されていればシーンの作成保存の成功です。

（確認する）

---
23. プレハブをインスタンス化する

それでは、アセットを使ってゲームオブジェクトを作っていきます。

「Project」ウィンドウの「Assets」をクリックしてください。
次に「＿Prefabs」をクリックしてください。
ここにプレハブが入っています。

プレハブのうち次のものを、
「Hierarchy」ウィンドウにドラッグ＆ドロップして
インスタンス化します。

1. BackgroundMusic
2. Floor
3. GameManager
4. HUDCanvas
5. MainCamera
6. MiniMapCamera
7. Player

（確認する）

---
24. プレハブとインスタンス化

プレハブとは、アセットの中でも
部品化するだけでそのまま動き出すもののことを指します。

「Project」ウィンドウから「Hierarchy」ウィンドウに
ドラッグ&ドロップすることで実際のオブジェクトになります。

この動作をインスタンス化といい、
実体化されたオブジェクトをインスタンスといいます。

---
25. キー入力の設定

そのほかに、いくつか設定をしていきます。

まずは、ゲームをプレイする人から
どのキーの入力を何の処理として受け付けるかという設定をします。

今回はタイピングゲームなので、
あるキーを押したらプレーヤーが左に動いてしまうといったことがないように、
アルファベットのキー入力を
ゲームオブジェクトに反映させないようにしていきます。

画面上部の「Edit」をクリックして
「ProjectSettings」から「Input」をクリックしてください。

一番右側の縦長のウィンドウが
「InputManager」という名前になったと思います。

「Axis」をクリックして、中身を展開してください。

その中の「Horizontal」をクリックすると、
「a」「d」と入力されている欄があります。
この「a」「d」を「Backspace」キーで消してください。

同じように「Vertical」から
「s」「w」を消してください。

この「Horizontal」は、
ゲームオブジェクトの水平方向をどのキーで受け付けるかという設定です。
同じように「Vertical」は垂直方向を受け付けます。

---
26. スカイボックスの設定

次に、スカイボックスの設定をします。
スカイボックスとは、
新規シーンを作成したときに見えた、空と地平線の色の設定です。
今回は専用アセットの中にあるスカイボックスを採用します。

画面上部の「Window」をクリックして
「Rendering」から「Lighting Settings」 をクリックします。

一番上の「Skybox Material」の欄の右側にある
サークルセレクトをクリックしてください。
サークルセレクトは、ドーナツのような丸い記号です。

ここをクリックするとウィンドウが出ますので、その中から
「NightmaresProceduralSkybox」というものをダブルクリックしてください。

名前が「Default Skybox」から変更されたでしょうか？

これでスカイボックスの設定ができました。

---
27. レイヤーの設定

次に、レイヤーの設定をします。
レイヤーとは、ゲームオブジェクトのグループ分けをするものです。

今回はこのレイヤーを利用して、
マウスの位置を取得するためのオブジェクトを設定します。

「Inspector」ウィンドウから「Layer」のドロップダウンをクリックして
「Add Layer」をクリックします。

すると、レイヤーを設定できるウィンドウに変わります。

このうち空いている一番上の欄に「Floor」と入力してください。
Fが大文字で、あとは小文字のloorです。

英語の大文字小文字まで間違いなく入力しないと動作しないので注意してください。

書けたでしょうか？

書けたら、「Hierarchy」ウィンドウにある「Floor」を展開して
「MousePointingFloor」をクリックしてください。

「Inspector」ウィンドウから「Layer」のドロップダウンをクリックすると
「Floor」というのが出来ていると思います。
この「Floor」をクリックして設定してください。

（確認する）

---
28. ナビメッシュの設定

次にナビメッシュの設定をします。

Unityでは、AI処理を使って
経路を自動探索させてゲームオブジェクトを動かすことができます。
この、自動で動かせる範囲がナビメッシュです。

今回は、エネミーが自動的にプレーヤーを追いかけてくる仕組みにするので、
このナビメッシュを設定します。

まず「Hierarchy」ウィンドウにある「Floor」を展開して
「NavMeshWalkableFloor」をクリックしてください。

「Inspector」に「MeshRenderer」というものがありますので、
これにチェックをつけてください。

次に、画面上部の「Window」をクリックして
「AI」から「Navigation」 をクリックしてください。

すると、「Navigation」ウィンドウが開いて
「Bake」というタブが見えると思いますのでそれをクリックしてください。

中央当たりに「Bake」というボタンがあるので
それをクリックしてください。

「Scene」ウィンドウを見てみると、
床の部分が水色に変わったと思います。

これでナビメッシュのベイクの成功です。

最後に「NavMeshWalkableFloor」の「MeshRenderer」の
チェックを外してください。

これは、ゲーム画面上に
このオブジェクトが見えるようにするかどうかのチェックです。

今回は別の床を用意してあるので、
見えるようにする必要はありません。

（確認する）

---
29. MainCameraとDirectionalLightの削除

次に、シーンを新規作成したときに
デフォルトで生成されていたカメラとライトを削除します。

カメラとライトは、
専用アセットの中に用意したものを使用します。

「Hierarchy」にある「MainCamera」「DirectionalLight」を
右クリックして「Delete」をクリックし削除してください。

（確認する）

---
30. シーンをリロードできるように設定

次が最後の設定です。

ゲームオーバーになったときに
シーンがリロードされるように設定します。

画面上部の「File」から「Build Settings」をクリックしてください。

出てきたウィンドウの中央あたりに「Add Open Scene」というボタンがあるので
クリックしてください。

また、「Sample Scene」という名前があって
チェックがついているかと思いますが、
これを右クリックして「Remove Selection」をクリックしてください。

このゲームでは「Sample Scene」は利用しません。

---
31. 動きを確かめる


ここまで出来たら、ゲームの動きを確かめてみます。

「Game」ウィンドウの枠にある「Maximize On Play」をクリックしてください。
押されたように見える状態なら、設定できています。

次に、画面上部の中央にあるプレイボタンをクリックしてください。

ゲームがプレイできます。

この「Game」ウィンドウには、
実際のゲームと同じ画面が映し出されます。

プレイしてテストしながら、
次の6点が上手くいっていることを確認してください。

1. 矢印キーの押された方向にプレーヤーが動く
2. マウスのある方向にプレーヤーが向く
3. 正しくキー入力をするとエネミーの問題文が赤文字に代わる
4. エネミーの問題文をすべて入力するとエネミーが死ぬ
5. エネミーはプレーヤーを自動で追いかけ続ける
6. プレーヤーのHPが0になるとゲームオーバーになり リスタートする

---
32. 問題なければ最後に

問題なければ最後に、ゲームのライトと舞台をインスタンス化します。

「Project」ウィンドウの「Assets」の「＿Prefabs」の中にある
「Lights」と「Environment」をインスタンス化してください。

インスタンス化できたら、
再度プレイモードにしてゲームをテストしてみてください。

エネミーとプレーヤーは
舞台上にあるオブジェクトを避けて動くようになっているでしょうか？

これで、ゲームが完成です。

---
33. トライしてみよう

ここまでできた人で時間が余った人は、
挑戦課題にトライしてみましょう。

エネミーについている英単語を変えたり、
プレーヤのHPを変更したり、
プレーヤーやエネミーの移動スピードを変えたり、
オブジェクトを動かしているプログラミングコードを触ってみたり、
ゲームオブジェクトを新たに作ってみたりしてみましょう。

やり方は資料にありますので、
わからない場合にはスタッフに声をかけてください。
